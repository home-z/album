DROP DATABASE IF EXISTS pictures;
CREATE DATABASE pictures;
USE pictures;
DROP TABLE IF EXISTS users;
CREATE TABLE users
(
	id INT PRIMARY KEY AUTO_INCREMENT,
	username VARCHAR(30) NOT NULL,
	userpwd VARCHAR(30) NOT NULL,
	sex VARCHAR(2) NOT NULL,
	birthday TIMESTAMP,
	telephone VARCHAR(15) UNIQUE,
	email VARCHAR(30) UNIQUE,
	address VARCHAR(50),
	remark VARCHAR(200)
);
DROP TABLE IF EXISTS folders;
CREATE TABLE folders
(
	id INT PRIMARY KEY AUTO_INCREMENT,
	foldername VARCHAR(80) NOT NULL,
	folderinfor VARCHAR(100),
	createtime TIMESTAMP,
	limitid INT,
	uid INT,
	CONSTRAINT U_F_FK FOREIGN KEY(uid) REFERENCES users(id)
);
DROP TABLE IF EXISTS photos;
CREATE TABLE photos
(
	id INT PRIMARY KEY AUTO_INCREMENT,
	photoname VARCHAR(50) NOT NULL,
	photoinfor VARCHAR(100),
	photopath VARCHAR(100) NOT NULL,
	createtime TIMESTAMP,
	fid INT NOT NULL,
	CONSTRAINT F_P_FK FOREIGN KEY(fid) REFERENCES floders(id)
);
DROP TABLE IF EXISTS friends;
CREATE TABLE friends
(
	id INT PRIMARY KEY AUTO_INCREMENT,
	userid INT NOT NULL,
	friendid INT NOT NULL,
	CONSTRAINT U_US_FK FOREIGN KEY(userid) REFERENCES users(id),
	CONSTRAINT U_FR_FK FOREIGN KEY(friendid) REFERENCES users(id)
);
DROP TABLE IF EXISTS comments;
CREATE TABLE comments
(
	id INT PRIMARY KEY AUTO_INCREMENT,
	photoid INT NOT NULL,
	floderid INT NOT NULL,
	userid INT NOT NULL,
	friendid INT NOT NULL,
	content VARCHAR(100) NOT NULL,
	commenttime TIMESTAMP,
	status INT NOT NULL,
	CONSTRAINT P_C_FK FOREIGN KEY(photoid) REFERENCES photos(id),
	CONSTRAINT F_C_FK FOREIGN KEY(floderid) REFERENCES floders(id),
	CONSTRAINT U_CU_FK FOREIGN KEY(userid) REFERENCES users(id),
	CONSTRAINT U_CF_FK FOREIGN KEY(friendid) REFERENCES users(id)
);